// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
'use strict';// WARNING: THIS MODULE IS PENDING DEPRECATION.
//
// No new pull requests targeting this module will be accepted
// unless they address existing, critical bugs.
var cov_2pak1flt9t=function(){var path='domain.js',hash='13211f3c74008f62611d9eee3dd44c39dc570392',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'domain.js',statementMap:{'0':{start:{line:29,column:13},end:{line:29,column:28}},'1':{start:{line:30,column:21},end:{line:30,column:38}},'2':{start:{line:31,column:17},end:{line:31,column:30}},'3':{start:{line:36,column:0},end:{line:36,column:33}},'4':{start:{line:40,column:14},end:{line:40,column:20}},'5':{start:{line:41,column:0},end:{line:49,column:3}},'6':{start:{line:44,column:4},end:{line:44,column:22}},'7':{start:{line:47,column:4},end:{line:47,column:28}},'8':{start:{line:53,column:14},end:{line:53,column:16}},'9':{start:{line:54,column:0},end:{line:54,column:23}},'10':{start:{line:57,column:21},end:{line:57,column:60}},'11':{start:{line:59,column:0},end:{line:59,column:24}},'12':{start:{line:61,column:0},end:{line:63,column:2}},'13':{start:{line:62,column:2},end:{line:62,column:22}},'14':{start:{line:66,column:0},end:{line:66,column:22}},'15':{start:{line:69,column:0},end:{line:69,column:31}},'16':{start:{line:72,column:2},end:{line:72,column:26}},'17':{start:{line:74,column:2},end:{line:74,column:20}},'18':{start:{line:77,column:0},end:{line:77,column:37}},'19':{start:{line:81,column:0},end:{line:150,column:2}},'20':{start:{line:82,column:15},end:{line:82,column:20}},'21':{start:{line:84,column:2},end:{line:87,column:3}},'22':{start:{line:85,column:4},end:{line:85,column:21}},'23':{start:{line:86,column:4},end:{line:86,column:27}},'24':{start:{line:98,column:2},end:{line:141,column:3}},'25':{start:{line:103,column:4},end:{line:113,column:5}},'26':{start:{line:104,column:6},end:{line:112,column:7}},'27':{start:{line:108,column:8},end:{line:108,column:52}},'28':{start:{line:109,column:8},end:{line:109,column:40}},'29':{start:{line:111,column:8},end:{line:111,column:53}},'30':{start:{line:116,column:4},end:{line:140,column:5}},'31':{start:{line:125,column:6},end:{line:125,column:38}},'32':{start:{line:131,column:6},end:{line:133,column:7}},'33':{start:{line:132,column:8},end:{line:132,column:20}},'34':{start:{line:134,column:6},end:{line:139,column:7}},'35':{start:{line:135,column:8},end:{line:135,column:66}},'36':{start:{line:136,column:8},end:{line:136,column:46}},'37':{start:{line:138,column:8},end:{line:138,column:23}},'38':{start:{line:146,column:2},end:{line:146,column:19}},'39':{start:{line:147,column:2},end:{line:147,column:41}},'40':{start:{line:149,column:2},end:{line:149,column:16}},'41':{start:{line:153,column:0},end:{line:159,column:2}},'42':{start:{line:156,column:2},end:{line:156,column:41}},'43':{start:{line:157,column:2},end:{line:157,column:19}},'44':{start:{line:158,column:2},end:{line:158,column:33}},'45':{start:{line:162,column:0},end:{line:173,column:2}},'46':{start:{line:164,column:14},end:{line:164,column:37}},'47':{start:{line:165,column:2},end:{line:165,column:27}},'48':{start:{line:165,column:20},end:{line:165,column:27}},'49':{start:{line:168,column:2},end:{line:168,column:22}},'50':{start:{line:169,column:2},end:{line:169,column:33}},'51':{start:{line:171,column:2},end:{line:171,column:43}},'52':{start:{line:172,column:2},end:{line:172,column:34}},'53':{start:{line:177,column:0},end:{line:203,column:2}},'54':{start:{line:179,column:2},end:{line:180,column:11}},'55':{start:{line:180,column:4},end:{line:180,column:11}},'56':{start:{line:183,column:2},end:{line:184,column:25}},'57':{start:{line:184,column:4},end:{line:184,column:25}},'58':{start:{line:195,column:2},end:{line:199,column:3}},'59':{start:{line:196,column:4},end:{line:198,column:5}},'60':{start:{line:197,column:6},end:{line:197,column:27}},'61':{start:{line:197,column:20},end:{line:197,column:27}},'62':{start:{line:201,column:2},end:{line:201,column:19}},'63':{start:{line:202,column:2},end:{line:202,column:24}},'64':{start:{line:206,column:0},end:{line:211,column:2}},'65':{start:{line:207,column:2},end:{line:207,column:19}},'66':{start:{line:208,column:14},end:{line:208,column:38}},'67':{start:{line:209,column:2},end:{line:210,column:34}},'68':{start:{line:210,column:4},end:{line:210,column:34}},'69':{start:{line:214,column:0},end:{line:232,column:2}},'70':{start:{line:217,column:2},end:{line:217,column:15}},'71':{start:{line:218,column:2},end:{line:228,column:3}},'72':{start:{line:219,column:14},end:{line:219,column:30}},'73':{start:{line:220,column:15},end:{line:220,column:33}},'74':{start:{line:222,column:4},end:{line:223,column:33}},'75':{start:{line:223,column:6},end:{line:223,column:33}},'76':{start:{line:225,column:4},end:{line:225,column:31}},'77':{start:{line:227,column:4},end:{line:227,column:24}},'78':{start:{line:229,column:2},end:{line:229,column:14}},'79':{start:{line:231,column:2},end:{line:231,column:13}},'80':{start:{line:236,column:2},end:{line:245,column:3}},'81':{start:{line:237,column:13},end:{line:237,column:22}},'82':{start:{line:238,column:4},end:{line:242,column:7}},'83':{start:{line:243,column:4},end:{line:243,column:27}},'84':{start:{line:244,column:4},end:{line:244,column:11}},'85':{start:{line:247,column:13},end:{line:247,column:15}},'86':{start:{line:250,column:2},end:{line:250,column:15}},'87':{start:{line:251,column:2},end:{line:257,column:3}},'88':{start:{line:252,column:4},end:{line:253,column:27}},'89':{start:{line:253,column:6},end:{line:253,column:27}},'90':{start:{line:254,column:4},end:{line:254,column:32}},'91':{start:{line:256,column:4},end:{line:256,column:25}},'92':{start:{line:258,column:2},end:{line:258,column:14}},'93':{start:{line:260,column:2},end:{line:260,column:13}},'94':{start:{line:264,column:0},end:{line:272,column:2}},'95':{start:{line:265,column:13},end:{line:265,column:17}},'96':{start:{line:268,column:4},end:{line:268,column:50}},'97':{start:{line:271,column:2},end:{line:271,column:24}},'98':{start:{line:278,column:2},end:{line:278,column:15}},'99':{start:{line:279,column:2},end:{line:282,column:25}},'100':{start:{line:280,column:4},end:{line:280,column:34}},'101':{start:{line:282,column:4},end:{line:282,column:25}},'102':{start:{line:283,column:2},end:{line:283,column:14}},'103':{start:{line:285,column:2},end:{line:285,column:13}},'104':{start:{line:289,column:0},end:{line:299,column:2}},'105':{start:{line:290,column:13},end:{line:290,column:17}},'106':{start:{line:293,column:4},end:{line:293,column:44}},'107':{start:{line:296,column:2},end:{line:296,column:25}},'108':{start:{line:298,column:2},end:{line:298,column:18}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:43,column:7},end:{line:43,column:8}},loc:{start:{line:43,column:18},end:{line:45,column:3}},line:43},'1':{name:'(anonymous_1)',decl:{start:{line:46,column:7},end:{line:46,column:8}},loc:{start:{line:46,column:21},end:{line:48,column:3}},line:46},'2':{name:'(anonymous_2)',decl:{start:{line:61,column:40},end:{line:61,column:41}},loc:{start:{line:61,column:51},end:{line:63,column:1}},line:61},'3':{name:'Domain',decl:{start:{line:71,column:9},end:{line:71,column:15}},loc:{start:{line:71,column:18},end:{line:75,column:1}},line:71},'4':{name:'_errorHandler',decl:{start:{line:81,column:42},end:{line:81,column:55}},loc:{start:{line:81,column:60},end:{line:150,column:1}},line:81},'5':{name:'(anonymous_5)',decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:36},end:{line:159,column:1}},line:153},'6':{name:'(anonymous_6)',decl:{start:{line:162,column:24},end:{line:162,column:25}},loc:{start:{line:162,column:35},end:{line:173,column:1}},line:162},'7':{name:'(anonymous_7)',decl:{start:{line:177,column:23},end:{line:177,column:24}},loc:{start:{line:177,column:36},end:{line:203,column:1}},line:177},'8':{name:'(anonymous_8)',decl:{start:{line:206,column:26},end:{line:206,column:27}},loc:{start:{line:206,column:39},end:{line:211,column:1}},line:206},'9':{name:'(anonymous_9)',decl:{start:{line:214,column:23},end:{line:214,column:24}},loc:{start:{line:214,column:36},end:{line:232,column:1}},line:214},'10':{name:'intercepted',decl:{start:{line:235,column:9},end:{line:235,column:20}},loc:{start:{line:235,column:46},end:{line:261,column:1}},line:235},'11':{name:'(anonymous_11)',decl:{start:{line:264,column:29},end:{line:264,column:30}},loc:{start:{line:264,column:42},end:{line:272,column:1}},line:264},'12':{name:'runIntercepted',decl:{start:{line:267,column:11},end:{line:267,column:25}},loc:{start:{line:267,column:28},end:{line:269,column:3}},line:267},'13':{name:'bound',decl:{start:{line:275,column:9},end:{line:275,column:14}},loc:{start:{line:275,column:40},end:{line:286,column:1}},line:275},'14':{name:'(anonymous_14)',decl:{start:{line:289,column:24},end:{line:289,column:25}},loc:{start:{line:289,column:37},end:{line:299,column:1}},line:289},'15':{name:'runBound',decl:{start:{line:292,column:11},end:{line:292,column:19}},loc:{start:{line:292,column:22},end:{line:294,column:3}},line:292}},branchMap:{'0':{loc:{start:{line:84,column:2},end:{line:87,column:3}},type:'if',locations:[{start:{line:84,column:2},end:{line:87,column:3}},{start:{line:84,column:2},end:{line:87,column:3}}],line:84},'1':{loc:{start:{line:98,column:2},end:{line:141,column:3}},type:'if',locations:[{start:{line:98,column:2},end:{line:141,column:3}},{start:{line:98,column:2},end:{line:141,column:3}}],line:98},'2':{loc:{start:{line:103,column:4},end:{line:113,column:5}},type:'if',locations:[{start:{line:103,column:4},end:{line:113,column:5}},{start:{line:103,column:4},end:{line:113,column:5}}],line:103},'3':{loc:{start:{line:131,column:6},end:{line:133,column:7}},type:'if',locations:[{start:{line:131,column:6},end:{line:133,column:7}},{start:{line:131,column:6},end:{line:133,column:7}}],line:131},'4':{loc:{start:{line:134,column:6},end:{line:139,column:7}},type:'if',locations:[{start:{line:134,column:6},end:{line:139,column:7}},{start:{line:134,column:6},end:{line:139,column:7}}],line:134},'5':{loc:{start:{line:165,column:2},end:{line:165,column:27}},type:'if',locations:[{start:{line:165,column:2},end:{line:165,column:27}},{start:{line:165,column:2},end:{line:165,column:27}}],line:165},'6':{loc:{start:{line:179,column:2},end:{line:180,column:11}},type:'if',locations:[{start:{line:179,column:2},end:{line:180,column:11}},{start:{line:179,column:2},end:{line:180,column:11}}],line:179},'7':{loc:{start:{line:183,column:2},end:{line:184,column:25}},type:'if',locations:[{start:{line:183,column:2},end:{line:184,column:25}},{start:{line:183,column:2},end:{line:184,column:25}}],line:183},'8':{loc:{start:{line:195,column:2},end:{line:199,column:3}},type:'if',locations:[{start:{line:195,column:2},end:{line:199,column:3}},{start:{line:195,column:2},end:{line:199,column:3}}],line:195},'9':{loc:{start:{line:195,column:6},end:{line:195,column:43}},type:'binary-expr',locations:[{start:{line:195,column:6},end:{line:195,column:17}},{start:{line:195,column:22},end:{line:195,column:42}}],line:195},'10':{loc:{start:{line:197,column:6},end:{line:197,column:27}},type:'if',locations:[{start:{line:197,column:6},end:{line:197,column:27}},{start:{line:197,column:6},end:{line:197,column:27}}],line:197},'11':{loc:{start:{line:209,column:2},end:{line:210,column:34}},type:'if',locations:[{start:{line:209,column:2},end:{line:210,column:34}},{start:{line:209,column:2},end:{line:210,column:34}}],line:209},'12':{loc:{start:{line:218,column:2},end:{line:228,column:3}},type:'if',locations:[{start:{line:218,column:2},end:{line:228,column:3}},{start:{line:218,column:2},end:{line:228,column:3}}],line:218},'13':{loc:{start:{line:236,column:2},end:{line:245,column:3}},type:'if',locations:[{start:{line:236,column:2},end:{line:245,column:3}},{start:{line:236,column:2},end:{line:245,column:3}}],line:236},'14':{loc:{start:{line:236,column:6},end:{line:236,column:45}},type:'binary-expr',locations:[{start:{line:236,column:6},end:{line:236,column:15}},{start:{line:236,column:19},end:{line:236,column:45}}],line:236},'15':{loc:{start:{line:251,column:2},end:{line:257,column:3}},type:'if',locations:[{start:{line:251,column:2},end:{line:257,column:3}},{start:{line:251,column:2},end:{line:257,column:3}}],line:251},'16':{loc:{start:{line:279,column:2},end:{line:282,column:25}},type:'if',locations:[{start:{line:279,column:2},end:{line:282,column:25}},{start:{line:279,column:2},end:{line:282,column:25}}],line:279}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0,0],'14':[0,0],'15':[0,0],'16':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const util=(cov_2pak1flt9t.s[0]++,require('util'));const EventEmitter=(cov_2pak1flt9t.s[1]++,require('events'));const inherits=(cov_2pak1flt9t.s[2]++,util.inherits);// communicate with events module, but don't require that
// module to have to load this one, since this module has
// a few side effects.
cov_2pak1flt9t.s[3]++;EventEmitter.usingDomains=true;// overwrite process.domain with a getter/setter that will allow for more
// effective optimizations
var _domain=(cov_2pak1flt9t.s[4]++,[null]);cov_2pak1flt9t.s[5]++;Object.defineProperty(process,'domain',{enumerable:true,get:function(){cov_2pak1flt9t.f[0]++;cov_2pak1flt9t.s[6]++;return _domain[0];},set:function(arg){cov_2pak1flt9t.f[1]++;cov_2pak1flt9t.s[7]++;return _domain[0]=arg;}});// It's possible to enter one domain while already inside
// another one. The stack is each entered domain.
const stack=(cov_2pak1flt9t.s[8]++,[]);cov_2pak1flt9t.s[9]++;exports._stack=stack;// let the process know we're using domains
const _domain_flag=(cov_2pak1flt9t.s[10]++,process._setupDomainUse(_domain,stack));cov_2pak1flt9t.s[11]++;exports.Domain=Domain;cov_2pak1flt9t.s[12]++;exports.create=exports.createDomain=function(){cov_2pak1flt9t.f[2]++;cov_2pak1flt9t.s[13]++;return new Domain();};// the active domain is always the one that we're currently in.
cov_2pak1flt9t.s[14]++;exports.active=null;cov_2pak1flt9t.s[15]++;inherits(Domain,EventEmitter);function Domain(){cov_2pak1flt9t.f[3]++;cov_2pak1flt9t.s[16]++;EventEmitter.call(this);cov_2pak1flt9t.s[17]++;this.members=[];}cov_2pak1flt9t.s[18]++;Domain.prototype.members=undefined;// Called by process._fatalException in case an error was thrown.
cov_2pak1flt9t.s[19]++;Domain.prototype._errorHandler=function _errorHandler(er){cov_2pak1flt9t.f[4]++;var caught=(cov_2pak1flt9t.s[20]++,false);cov_2pak1flt9t.s[21]++;if(!util.isPrimitive(er)){cov_2pak1flt9t.b[0][0]++;cov_2pak1flt9t.s[22]++;er.domain=this;cov_2pak1flt9t.s[23]++;er.domainThrown=true;}else{cov_2pak1flt9t.b[0][1]++;}// The top-level domain-handler is handled separately.
//
// The reason is that if V8 was passed a command line option
// asking it to abort on an uncaught exception (currently
// "--abort-on-uncaught-exception"), we want an uncaught exception
// in the top-level domain error handler to make the
// process abort. Using try/catch here would always make V8 think
// that these exceptions are caught, and thus would prevent it from
// aborting in these cases.
cov_2pak1flt9t.s[24]++;if(stack.length===1){cov_2pak1flt9t.b[1][0]++;cov_2pak1flt9t.s[25]++;// If there's no error handler, do not emit an 'error' event
// as this would throw an error, make the process exit, and thus
// prevent the process 'uncaughtException' event from being emitted
// if a listener is set.
if(EventEmitter.listenerCount(this,'error')>0){cov_2pak1flt9t.b[2][0]++;cov_2pak1flt9t.s[26]++;try{cov_2pak1flt9t.s[27]++;// Set the _emittingTopLevelDomainError so that we know that, even
// if technically the top-level domain is still active, it would
// be ok to abort on an uncaught exception at this point
process._emittingTopLevelDomainError=true;cov_2pak1flt9t.s[28]++;caught=this.emit('error',er);}finally{cov_2pak1flt9t.s[29]++;process._emittingTopLevelDomainError=false;}}else{cov_2pak1flt9t.b[2][1]++;}}else{cov_2pak1flt9t.b[1][1]++;cov_2pak1flt9t.s[30]++;// wrap this in a try/catch so we don't get infinite throwing
try{cov_2pak1flt9t.s[31]++;// One of three things will happen here.
//
// 1. There is a handler, caught = true
// 2. There is no handler, caught = false
// 3. It throws, caught = false
//
// If caught is false after this, then there's no need to exit()
// the domain, because we're going to crash the process anyway.
caught=this.emit('error',er);}catch(er2){cov_2pak1flt9t.s[32]++;// The domain error handler threw!  oh no!
// See if another domain can catch THIS error,
// or else crash on the original one.
// If the user already exited it, then don't double-exit.
if(this===exports.active){cov_2pak1flt9t.b[3][0]++;cov_2pak1flt9t.s[33]++;stack.pop();}else{cov_2pak1flt9t.b[3][1]++;}cov_2pak1flt9t.s[34]++;if(stack.length){cov_2pak1flt9t.b[4][0]++;cov_2pak1flt9t.s[35]++;exports.active=process.domain=stack[stack.length-1];cov_2pak1flt9t.s[36]++;caught=process._fatalException(er2);}else{cov_2pak1flt9t.b[4][1]++;cov_2pak1flt9t.s[37]++;caught=false;}}}// Exit all domains on the stack.  Uncaught exceptions end the
// current tick and no domains should be left on the stack
// between ticks.
cov_2pak1flt9t.s[38]++;stack.length=0;cov_2pak1flt9t.s[39]++;exports.active=process.domain=null;cov_2pak1flt9t.s[40]++;return caught;};cov_2pak1flt9t.s[41]++;Domain.prototype.enter=function(){cov_2pak1flt9t.f[5]++;cov_2pak1flt9t.s[42]++;// note that this might be a no-op, but we still need
// to push it onto the stack so that we can pop it later.
exports.active=process.domain=this;cov_2pak1flt9t.s[43]++;stack.push(this);cov_2pak1flt9t.s[44]++;_domain_flag[0]=stack.length;};cov_2pak1flt9t.s[45]++;Domain.prototype.exit=function(){cov_2pak1flt9t.f[6]++;// don't do anything if this domain is not on the stack.
var index=(cov_2pak1flt9t.s[46]++,stack.lastIndexOf(this));cov_2pak1flt9t.s[47]++;if(index===-1){cov_2pak1flt9t.b[5][0]++;cov_2pak1flt9t.s[48]++;return;}else{cov_2pak1flt9t.b[5][1]++;}// exit all domains until this one.
cov_2pak1flt9t.s[49]++;stack.splice(index);cov_2pak1flt9t.s[50]++;_domain_flag[0]=stack.length;cov_2pak1flt9t.s[51]++;exports.active=stack[stack.length-1];cov_2pak1flt9t.s[52]++;process.domain=exports.active;};// note: this works for timers as well.
cov_2pak1flt9t.s[53]++;Domain.prototype.add=function(ee){cov_2pak1flt9t.f[7]++;cov_2pak1flt9t.s[54]++;// If the domain is already added, then nothing left to do.
if(ee.domain===this){cov_2pak1flt9t.b[6][0]++;cov_2pak1flt9t.s[55]++;return;}else{cov_2pak1flt9t.b[6][1]++;}// has a domain already - remove it first.
cov_2pak1flt9t.s[56]++;if(ee.domain){cov_2pak1flt9t.b[7][0]++;cov_2pak1flt9t.s[57]++;ee.domain.remove(ee);}else{cov_2pak1flt9t.b[7][1]++;}// check for circular Domain->Domain links.
// This causes bad insanity!
//
// For example:
// var d = domain.create();
// var e = domain.create();
// d.add(e);
// e.add(d);
// e.emit('error', er); // RangeError, stack overflow!
cov_2pak1flt9t.s[58]++;if((cov_2pak1flt9t.b[9][0]++,this.domain)&&(cov_2pak1flt9t.b[9][1]++,ee instanceof Domain)){cov_2pak1flt9t.b[8][0]++;cov_2pak1flt9t.s[59]++;for(var d=this.domain;d;d=d.domain){cov_2pak1flt9t.s[60]++;if(ee===d){cov_2pak1flt9t.b[10][0]++;cov_2pak1flt9t.s[61]++;return;}else{cov_2pak1flt9t.b[10][1]++;}}}else{cov_2pak1flt9t.b[8][1]++;}cov_2pak1flt9t.s[62]++;ee.domain=this;cov_2pak1flt9t.s[63]++;this.members.push(ee);};cov_2pak1flt9t.s[64]++;Domain.prototype.remove=function(ee){cov_2pak1flt9t.f[8]++;cov_2pak1flt9t.s[65]++;ee.domain=null;var index=(cov_2pak1flt9t.s[66]++,this.members.indexOf(ee));cov_2pak1flt9t.s[67]++;if(index!==-1){cov_2pak1flt9t.b[11][0]++;cov_2pak1flt9t.s[68]++;this.members.splice(index,1);}else{cov_2pak1flt9t.b[11][1]++;}};cov_2pak1flt9t.s[69]++;Domain.prototype.run=function(fn){cov_2pak1flt9t.f[9]++;var ret;cov_2pak1flt9t.s[70]++;this.enter();cov_2pak1flt9t.s[71]++;if(arguments.length>=2){cov_2pak1flt9t.b[12][0]++;var len=(cov_2pak1flt9t.s[72]++,arguments.length);var args=(cov_2pak1flt9t.s[73]++,new Array(len-1));cov_2pak1flt9t.s[74]++;for(var i=1;i<len;i++){cov_2pak1flt9t.s[75]++;args[i-1]=arguments[i];}cov_2pak1flt9t.s[76]++;ret=fn.apply(this,args);}else{cov_2pak1flt9t.b[12][1]++;cov_2pak1flt9t.s[77]++;ret=fn.call(this);}cov_2pak1flt9t.s[78]++;this.exit();cov_2pak1flt9t.s[79]++;return ret;};function intercepted(_this,self,cb,fnargs){cov_2pak1flt9t.f[10]++;cov_2pak1flt9t.s[80]++;if((cov_2pak1flt9t.b[14][0]++,fnargs[0])&&(cov_2pak1flt9t.b[14][1]++,fnargs[0]instanceof Error)){cov_2pak1flt9t.b[13][0]++;var er=(cov_2pak1flt9t.s[81]++,fnargs[0]);cov_2pak1flt9t.s[82]++;util._extend(er,{domainBound:cb,domainThrown:false,domain:self});cov_2pak1flt9t.s[83]++;self.emit('error',er);cov_2pak1flt9t.s[84]++;return;}else{cov_2pak1flt9t.b[13][1]++;}var args=(cov_2pak1flt9t.s[85]++,[]);var i,ret;cov_2pak1flt9t.s[86]++;self.enter();cov_2pak1flt9t.s[87]++;if(fnargs.length>1){cov_2pak1flt9t.b[15][0]++;cov_2pak1flt9t.s[88]++;for(i=1;i<fnargs.length;i++){cov_2pak1flt9t.s[89]++;args.push(fnargs[i]);}cov_2pak1flt9t.s[90]++;ret=cb.apply(_this,args);}else{cov_2pak1flt9t.b[15][1]++;cov_2pak1flt9t.s[91]++;ret=cb.call(_this);}cov_2pak1flt9t.s[92]++;self.exit();cov_2pak1flt9t.s[93]++;return ret;}cov_2pak1flt9t.s[94]++;Domain.prototype.intercept=function(cb){cov_2pak1flt9t.f[11]++;var self=(cov_2pak1flt9t.s[95]++,this);function runIntercepted(){cov_2pak1flt9t.f[12]++;cov_2pak1flt9t.s[96]++;return intercepted(this,self,cb,arguments);}cov_2pak1flt9t.s[97]++;return runIntercepted;};function bound(_this,self,cb,fnargs){cov_2pak1flt9t.f[13]++;var ret;cov_2pak1flt9t.s[98]++;self.enter();cov_2pak1flt9t.s[99]++;if(fnargs.length>0){cov_2pak1flt9t.b[16][0]++;cov_2pak1flt9t.s[100]++;ret=cb.apply(_this,fnargs);}else{cov_2pak1flt9t.b[16][1]++;cov_2pak1flt9t.s[101]++;ret=cb.call(_this);}cov_2pak1flt9t.s[102]++;self.exit();cov_2pak1flt9t.s[103]++;return ret;}cov_2pak1flt9t.s[104]++;Domain.prototype.bind=function(cb){cov_2pak1flt9t.f[14]++;var self=(cov_2pak1flt9t.s[105]++,this);function runBound(){cov_2pak1flt9t.f[15]++;cov_2pak1flt9t.s[106]++;return bound(this,self,cb,arguments);}cov_2pak1flt9t.s[107]++;runBound.domain=this;cov_2pak1flt9t.s[108]++;return runBound;};