'use strict';var cov_17yunryoxc=function(){var path='internal/loader/Loader.js',hash='cf95f89aa0e79669d09e32dfed04be4443396f61',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'internal/loader/Loader.js',statementMap:{'0':{start:{line:3,column:16},end:{line:3,column:30}},'1':{start:{line:4,column:31},end:{line:4,column:54}},'2':{start:{line:8,column:4},end:{line:8,column:41}},'3':{start:{line:10,column:18},end:{line:10,column:54}},'4':{start:{line:11,column:18},end:{line:11,column:54}},'5':{start:{line:12,column:26},end:{line:12,column:70}},'6':{start:{line:13,column:15},end:{line:13,column:41}},'7':{start:{line:16,column:2},end:{line:25,column:3}},'8':{start:{line:17,column:4},end:{line:17,column:51}},'9':{start:{line:19,column:4},end:{line:19,column:12}},'10':{start:{line:21,column:4},end:{line:23,column:5}},'11':{start:{line:22,column:6},end:{line:22,column:23}},'12':{start:{line:24,column:4},end:{line:24,column:12}},'13':{start:{line:30,column:4},end:{line:30,column:37}},'14':{start:{line:31,column:4},end:{line:33,column:5}},'15':{start:{line:32,column:6},end:{line:32,column:72}},'16':{start:{line:34,column:4},end:{line:34,column:21}},'17':{start:{line:38,column:20},end:{line:38,column:59}},'18':{start:{line:39,column:4},end:{line:42,column:5}},'19':{start:{line:40,column:6},end:{line:41,column:60}},'20':{start:{line:43,column:4},end:{line:43,column:23}},'21':{start:{line:47,column:4},end:{line:49,column:5}},'22':{start:{line:48,column:6},end:{line:48,column:69}},'23':{start:{line:50,column:20},end:{line:50,column:72}},'24':{start:{line:51,column:16},end:{line:51,column:32}},'25':{start:{line:52,column:4},end:{line:54,column:5}},'26':{start:{line:53,column:6},end:{line:53,column:37}},'27':{start:{line:55,column:26},end:{line:55,column:54}},'28':{start:{line:56,column:4},end:{line:56,column:43}},'29':{start:{line:57,column:4},end:{line:57,column:25}},'30':{start:{line:61,column:20},end:{line:61,column:65}},'31':{start:{line:62,column:16},end:{line:62,column:32}},'32':{start:{line:64,column:4},end:{line:69,column:5}},'33':{start:{line:65,column:6},end:{line:65,column:36}},'34':{start:{line:67,column:6},end:{line:67,column:41}},'35':{start:{line:68,column:6},end:{line:68,column:35}},'36':{start:{line:70,column:19},end:{line:70,column:34}},'37':{start:{line:71,column:4},end:{line:71,column:44}},'38':{start:{line:74,column:0},end:{line:74,column:46}},'39':{start:{line:75,column:0},end:{line:75,column:24}}},fnMap:{'0':{name:'getBase',decl:{start:{line:15,column:9},end:{line:15,column:16}},loc:{start:{line:15,column:19},end:{line:26,column:1}},line:15},'1':{name:'(anonymous_1)',decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:32},end:{line:35,column:3}},line:29},'2':{name:'(anonymous_2)',decl:{start:{line:37,column:2},end:{line:37,column:3}},loc:{start:{line:37,column:27},end:{line:44,column:3}},line:37},'3':{name:'(anonymous_3)',decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:46},end:{line:58,column:3}},line:46},'4':{name:'(anonymous_4)',decl:{start:{line:60,column:2},end:{line:60,column:3}},loc:{start:{line:60,column:26},end:{line:72,column:3}},line:60}},branchMap:{'0':{loc:{start:{line:21,column:4},end:{line:23,column:5}},type:'if',locations:[{start:{line:21,column:4},end:{line:23,column:5}},{start:{line:21,column:4},end:{line:23,column:5}}],line:21},'1':{loc:{start:{line:29,column:14},end:{line:29,column:30}},type:'default-arg',locations:[{start:{line:29,column:21},end:{line:29,column:30}}],line:29},'2':{loc:{start:{line:31,column:4},end:{line:33,column:5}},type:'if',locations:[{start:{line:31,column:4},end:{line:33,column:5}},{start:{line:31,column:4},end:{line:33,column:5}}],line:31},'3':{loc:{start:{line:31,column:8},end:{line:31,column:67}},type:'binary-expr',locations:[{start:{line:31,column:8},end:{line:31,column:35}},{start:{line:31,column:39},end:{line:31,column:67}}],line:31},'4':{loc:{start:{line:39,column:4},end:{line:42,column:5}},type:'if',locations:[{start:{line:39,column:4},end:{line:42,column:5}},{start:{line:39,column:4},end:{line:42,column:5}}],line:39},'5':{loc:{start:{line:47,column:4},end:{line:49,column:5}},type:'if',locations:[{start:{line:47,column:4},end:{line:49,column:5}},{start:{line:47,column:4},end:{line:49,column:5}}],line:47},'6':{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:'if',locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:52,column:4},end:{line:54,column:5}}],line:52},'7':{loc:{start:{line:64,column:4},end:{line:69,column:5}},type:'if',locations:[{start:{line:64,column:4},end:{line:69,column:5}},{start:{line:64,column:4},end:{line:69,column:5}}],line:64}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0},b:{'0':[0,0],'1':[0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const{URL}=(cov_17yunryoxc.s[0]++,require('url'));const{getURLFromFilePath}=(cov_17yunryoxc.s[1]++,require('internal/url'));const{getNamespaceOfModuleWrap}=(cov_17yunryoxc.s[2]++,require('internal/loader/ModuleWrap'));const ModuleMap=(cov_17yunryoxc.s[3]++,require('internal/loader/ModuleMap'));const ModuleJob=(cov_17yunryoxc.s[4]++,require('internal/loader/ModuleJob'));const resolveRequestUrl=(cov_17yunryoxc.s[5]++,require('internal/loader/resolveRequestUrl'));const errors=(cov_17yunryoxc.s[6]++,require('internal/errors'));function getBase(){cov_17yunryoxc.f[0]++;cov_17yunryoxc.s[7]++;try{cov_17yunryoxc.s[8]++;return getURLFromFilePath(`${process.cwd()}/`);}catch(e){cov_17yunryoxc.s[9]++;e.stack;// If the current working directory no longer exists.
cov_17yunryoxc.s[10]++;if(e.code==='ENOENT'){cov_17yunryoxc.b[0][0]++;cov_17yunryoxc.s[11]++;return undefined;}else{cov_17yunryoxc.b[0][1]++;}cov_17yunryoxc.s[12]++;throw e;}}class Loader{constructor(base=(cov_17yunryoxc.b[1][0]++,getBase())){cov_17yunryoxc.f[1]++;cov_17yunryoxc.s[13]++;this.moduleMap=new ModuleMap();cov_17yunryoxc.s[14]++;if((cov_17yunryoxc.b[3][0]++,typeof base!=='undefined')&&(cov_17yunryoxc.b[3][1]++,base instanceof URL!==true)){cov_17yunryoxc.b[2][0]++;cov_17yunryoxc.s[15]++;throw new errors.TypeError('ERR_INVALID_ARG_TYPE','base','URL');}else{cov_17yunryoxc.b[2][1]++;}cov_17yunryoxc.s[16]++;this.base=base;}async resolve(specifier){cov_17yunryoxc.f[2]++;const request=(cov_17yunryoxc.s[17]++,resolveRequestUrl(this.base,specifier));cov_17yunryoxc.s[18]++;if(request.url.protocol!=='file:'){cov_17yunryoxc.b[4][0]++;cov_17yunryoxc.s[19]++;throw new errors.Error('ERR_INVALID_PROTOCOL',request.url.protocol,'file:');}else{cov_17yunryoxc.b[4][1]++;}cov_17yunryoxc.s[20]++;return request.url;}async getModuleJob(dependentJob,specifier){cov_17yunryoxc.f[3]++;cov_17yunryoxc.s[21]++;if(!this.moduleMap.has(dependentJob.url)){cov_17yunryoxc.b[5][0]++;cov_17yunryoxc.s[22]++;throw new errors.Error('ERR_MISSING_MODULE',dependentJob.url);}else{cov_17yunryoxc.b[5][1]++;}const request=(cov_17yunryoxc.s[23]++,await resolveRequestUrl(dependentJob.url,specifier));const url=(cov_17yunryoxc.s[24]++,`${request.url}`);cov_17yunryoxc.s[25]++;if(this.moduleMap.has(url)){cov_17yunryoxc.b[6][0]++;cov_17yunryoxc.s[26]++;return this.moduleMap.get(url);}else{cov_17yunryoxc.b[6][1]++;}const dependencyJob=(cov_17yunryoxc.s[27]++,new ModuleJob(this,request));cov_17yunryoxc.s[28]++;this.moduleMap.set(url,dependencyJob);cov_17yunryoxc.s[29]++;return dependencyJob;}async import(specifier){cov_17yunryoxc.f[4]++;const request=(cov_17yunryoxc.s[30]++,await resolveRequestUrl(this.base,specifier));const url=(cov_17yunryoxc.s[31]++,`${request.url}`);let job;cov_17yunryoxc.s[32]++;if(this.moduleMap.has(url)){cov_17yunryoxc.b[7][0]++;cov_17yunryoxc.s[33]++;job=this.moduleMap.get(url);}else{cov_17yunryoxc.b[7][1]++;cov_17yunryoxc.s[34]++;job=new ModuleJob(this,request);cov_17yunryoxc.s[35]++;this.moduleMap.set(url,job);}const module=(cov_17yunryoxc.s[36]++,await job.run());cov_17yunryoxc.s[37]++;return getNamespaceOfModuleWrap(module);}}cov_17yunryoxc.s[38]++;Object.setPrototypeOf(Loader.prototype,null);cov_17yunryoxc.s[39]++;module.exports=Loader;