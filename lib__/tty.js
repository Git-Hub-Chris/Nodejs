// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
'use strict';var cov_2cbtmpe5hf=function(){var path='tty.js',hash='fb131fd34e1053dcdf3b33072ce6e2e326ddd94f',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'tty.js',statementMap:{'0':{start:{line:24,column:13},end:{line:24,column:28}},'1':{start:{line:25,column:12},end:{line:25,column:26}},'2':{start:{line:26,column:12},end:{line:26,column:43}},'3':{start:{line:27,column:14},end:{line:27,column:47}},'4':{start:{line:28,column:17},end:{line:28,column:30}},'5':{start:{line:29,column:23},end:{line:29,column:43}},'6':{start:{line:30,column:15},end:{line:30,column:41}},'7':{start:{line:31,column:17},end:{line:31,column:36}},'8':{start:{line:33,column:0},end:{line:35,column:2}},'9':{start:{line:34,column:2},end:{line:34,column:19}},'10':{start:{line:39,column:2},end:{line:40,column:39}},'11':{start:{line:40,column:4},end:{line:40,column:39}},'12':{start:{line:41,column:2},end:{line:42,column:54}},'13':{start:{line:42,column:4},end:{line:42,column:54}},'14':{start:{line:44,column:2},end:{line:49,column:14}},'15':{start:{line:51,column:2},end:{line:51,column:33}},'16':{start:{line:53,column:2},end:{line:53,column:21}},'17':{start:{line:54,column:2},end:{line:54,column:20}},'18':{start:{line:56,column:0},end:{line:56,column:33}},'19':{start:{line:58,column:0},end:{line:58,column:32}},'20':{start:{line:60,column:0},end:{line:64,column:2}},'21':{start:{line:61,column:2},end:{line:61,column:16}},'22':{start:{line:62,column:2},end:{line:62,column:32}},'23':{start:{line:63,column:2},end:{line:63,column:20}},'24':{start:{line:68,column:2},end:{line:69,column:31}},'25':{start:{line:69,column:4},end:{line:69,column:31}},'26':{start:{line:70,column:2},end:{line:71,column:54}},'27':{start:{line:71,column:4},end:{line:71,column:54}},'28':{start:{line:73,column:2},end:{line:77,column:5}},'29':{start:{line:84,column:2},end:{line:84,column:33}},'30':{start:{line:86,column:16},end:{line:86,column:28}},'31':{start:{line:87,column:12},end:{line:87,column:47}},'32':{start:{line:88,column:2},end:{line:91,column:3}},'33':{start:{line:89,column:4},end:{line:89,column:30}},'34':{start:{line:90,column:4},end:{line:90,column:27}},'35':{start:{line:93,column:0},end:{line:93,column:34}},'36':{start:{line:94,column:0},end:{line:94,column:34}},'37':{start:{line:97,column:0},end:{line:97,column:35}},'38':{start:{line:100,column:0},end:{line:116,column:2}},'39':{start:{line:101,column:16},end:{line:101,column:28}},'40':{start:{line:102,column:16},end:{line:102,column:25}},'41':{start:{line:103,column:16},end:{line:103,column:28}},'42':{start:{line:104,column:12},end:{line:104,column:47}},'43':{start:{line:105,column:2},end:{line:108,column:3}},'44':{start:{line:106,column:4},end:{line:106,column:61}},'45':{start:{line:107,column:4},end:{line:107,column:11}},'46':{start:{line:109,column:16},end:{line:109,column:26}},'47':{start:{line:110,column:16},end:{line:110,column:26}},'48':{start:{line:111,column:2},end:{line:115,column:3}},'49':{start:{line:112,column:4},end:{line:112,column:27}},'50':{start:{line:113,column:4},end:{line:113,column:24}},'51':{start:{line:114,column:4},end:{line:114,column:24}},'52':{start:{line:120,column:0},end:{line:122,column:2}},'53':{start:{line:121,column:2},end:{line:121,column:32}},'54':{start:{line:123,column:0},end:{line:125,column:2}},'55':{start:{line:124,column:2},end:{line:124,column:36}},'56':{start:{line:126,column:0},end:{line:128,column:2}},'57':{start:{line:127,column:2},end:{line:127,column:32}},'58':{start:{line:129,column:0},end:{line:131,column:2}},'59':{start:{line:130,column:2},end:{line:130,column:33}},'60':{start:{line:132,column:0},end:{line:134,column:2}},'61':{start:{line:133,column:2},end:{line:133,column:35}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:33,column:17},end:{line:33,column:18}},loc:{start:{line:33,column:30},end:{line:35,column:1}},line:33},'1':{name:'ReadStream',decl:{start:{line:38,column:9},end:{line:38,column:19}},loc:{start:{line:38,column:33},end:{line:55,column:1}},line:38},'2':{name:'(anonymous_2)',decl:{start:{line:60,column:34},end:{line:60,column:35}},loc:{start:{line:60,column:49},end:{line:64,column:1}},line:60},'3':{name:'WriteStream',decl:{start:{line:67,column:9},end:{line:67,column:20}},loc:{start:{line:67,column:25},end:{line:92,column:1}},line:67},'4':{name:'(anonymous_4)',decl:{start:{line:100,column:37},end:{line:100,column:38}},loc:{start:{line:100,column:48},end:{line:116,column:1}},line:100},'5':{name:'(anonymous_5)',decl:{start:{line:120,column:33},end:{line:120,column:34}},loc:{start:{line:120,column:48},end:{line:122,column:1}},line:120},'6':{name:'(anonymous_6)',decl:{start:{line:123,column:35},end:{line:123,column:36}},loc:{start:{line:123,column:52},end:{line:125,column:1}},line:123},'7':{name:'(anonymous_7)',decl:{start:{line:126,column:34},end:{line:126,column:35}},loc:{start:{line:126,column:48},end:{line:128,column:1}},line:126},'8':{name:'(anonymous_8)',decl:{start:{line:129,column:40},end:{line:129,column:41}},loc:{start:{line:129,column:51},end:{line:131,column:1}},line:129},'9':{name:'(anonymous_9)',decl:{start:{line:132,column:38},end:{line:132,column:39}},loc:{start:{line:132,column:49},end:{line:134,column:1}},line:132}},branchMap:{'0':{loc:{start:{line:39,column:2},end:{line:40,column:39}},type:'if',locations:[{start:{line:39,column:2},end:{line:40,column:39}},{start:{line:39,column:2},end:{line:40,column:39}}],line:39},'1':{loc:{start:{line:41,column:2},end:{line:42,column:54}},type:'if',locations:[{start:{line:41,column:2},end:{line:42,column:54}},{start:{line:41,column:2},end:{line:42,column:54}}],line:41},'2':{loc:{start:{line:41,column:6},end:{line:41,column:30}},type:'binary-expr',locations:[{start:{line:41,column:6},end:{line:41,column:20}},{start:{line:41,column:24},end:{line:41,column:30}}],line:41},'3':{loc:{start:{line:68,column:2},end:{line:69,column:31}},type:'if',locations:[{start:{line:68,column:2},end:{line:69,column:31}},{start:{line:68,column:2},end:{line:69,column:31}}],line:68},'4':{loc:{start:{line:70,column:2},end:{line:71,column:54}},type:'if',locations:[{start:{line:70,column:2},end:{line:71,column:54}},{start:{line:70,column:2},end:{line:71,column:54}}],line:70},'5':{loc:{start:{line:70,column:6},end:{line:70,column:30}},type:'binary-expr',locations:[{start:{line:70,column:6},end:{line:70,column:20}},{start:{line:70,column:24},end:{line:70,column:30}}],line:70},'6':{loc:{start:{line:88,column:2},end:{line:91,column:3}},type:'if',locations:[{start:{line:88,column:2},end:{line:91,column:3}},{start:{line:88,column:2},end:{line:91,column:3}}],line:88},'7':{loc:{start:{line:105,column:2},end:{line:108,column:3}},type:'if',locations:[{start:{line:105,column:2},end:{line:108,column:3}},{start:{line:105,column:2},end:{line:108,column:3}}],line:105},'8':{loc:{start:{line:111,column:2},end:{line:115,column:3}},type:'if',locations:[{start:{line:111,column:2},end:{line:115,column:3}},{start:{line:111,column:2},end:{line:115,column:3}}],line:111},'9':{loc:{start:{line:111,column:6},end:{line:111,column:48}},type:'binary-expr',locations:[{start:{line:111,column:6},end:{line:111,column:25}},{start:{line:111,column:29},end:{line:111,column:48}}],line:111}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const util=(cov_2cbtmpe5hf.s[0]++,require('util'));const net=(cov_2cbtmpe5hf.s[1]++,require('net'));const TTY=(cov_2cbtmpe5hf.s[2]++,process.binding('tty_wrap').TTY);const isTTY=(cov_2cbtmpe5hf.s[3]++,process.binding('tty_wrap').isTTY);const inherits=(cov_2cbtmpe5hf.s[4]++,util.inherits);const errnoException=(cov_2cbtmpe5hf.s[5]++,util._errnoException);const errors=(cov_2cbtmpe5hf.s[6]++,require('internal/errors'));const readline=(cov_2cbtmpe5hf.s[7]++,require('readline'));cov_2cbtmpe5hf.s[8]++;exports.isatty=function(fd){cov_2cbtmpe5hf.f[0]++;cov_2cbtmpe5hf.s[9]++;return isTTY(fd);};function ReadStream(fd,options){cov_2cbtmpe5hf.f[1]++;cov_2cbtmpe5hf.s[10]++;if(!(this instanceof ReadStream)){cov_2cbtmpe5hf.b[0][0]++;cov_2cbtmpe5hf.s[11]++;return new ReadStream(fd,options);}else{cov_2cbtmpe5hf.b[0][1]++;}cov_2cbtmpe5hf.s[12]++;if((cov_2cbtmpe5hf.b[2][0]++,fd>>0!==fd)||(cov_2cbtmpe5hf.b[2][1]++,fd<0)){cov_2cbtmpe5hf.b[1][0]++;cov_2cbtmpe5hf.s[13]++;throw new errors.RangeError('ERR_INVALID_FD',fd);}else{cov_2cbtmpe5hf.b[1][1]++;}cov_2cbtmpe5hf.s[14]++;options=util._extend({highWaterMark:0,readable:true,writable:false,handle:new TTY(fd,true)},options);cov_2cbtmpe5hf.s[15]++;net.Socket.call(this,options);cov_2cbtmpe5hf.s[16]++;this.isRaw=false;cov_2cbtmpe5hf.s[17]++;this.isTTY=true;}cov_2cbtmpe5hf.s[18]++;inherits(ReadStream,net.Socket);cov_2cbtmpe5hf.s[19]++;exports.ReadStream=ReadStream;cov_2cbtmpe5hf.s[20]++;ReadStream.prototype.setRawMode=function(flag){cov_2cbtmpe5hf.f[2]++;cov_2cbtmpe5hf.s[21]++;flag=!!flag;cov_2cbtmpe5hf.s[22]++;this._handle.setRawMode(flag);cov_2cbtmpe5hf.s[23]++;this.isRaw=flag;};function WriteStream(fd){cov_2cbtmpe5hf.f[3]++;cov_2cbtmpe5hf.s[24]++;if(!(this instanceof WriteStream)){cov_2cbtmpe5hf.b[3][0]++;cov_2cbtmpe5hf.s[25]++;return new WriteStream(fd);}else{cov_2cbtmpe5hf.b[3][1]++;}cov_2cbtmpe5hf.s[26]++;if((cov_2cbtmpe5hf.b[5][0]++,fd>>0!==fd)||(cov_2cbtmpe5hf.b[5][1]++,fd<0)){cov_2cbtmpe5hf.b[4][0]++;cov_2cbtmpe5hf.s[27]++;throw new errors.RangeError('ERR_INVALID_FD',fd);}else{cov_2cbtmpe5hf.b[4][1]++;}cov_2cbtmpe5hf.s[28]++;net.Socket.call(this,{handle:new TTY(fd,false),readable:false,writable:true});// Prevents interleaved or dropped stdout/stderr output for terminals.
// As noted in the following reference, local TTYs tend to be quite fast and
// this behavior has become expected due historical functionality on OS X,
// even though it was originally intended to change in v1.0.2 (Libuv 1.2.1).
// Ref: https://github.com/nodejs/node/pull/1771#issuecomment-119351671
cov_2cbtmpe5hf.s[29]++;this._handle.setBlocking(true);var winSize=(cov_2cbtmpe5hf.s[30]++,new Array(2));var err=(cov_2cbtmpe5hf.s[31]++,this._handle.getWindowSize(winSize));cov_2cbtmpe5hf.s[32]++;if(!err){cov_2cbtmpe5hf.b[6][0]++;cov_2cbtmpe5hf.s[33]++;this.columns=winSize[0];cov_2cbtmpe5hf.s[34]++;this.rows=winSize[1];}else{cov_2cbtmpe5hf.b[6][1]++;}}cov_2cbtmpe5hf.s[35]++;inherits(WriteStream,net.Socket);cov_2cbtmpe5hf.s[36]++;exports.WriteStream=WriteStream;cov_2cbtmpe5hf.s[37]++;WriteStream.prototype.isTTY=true;cov_2cbtmpe5hf.s[38]++;WriteStream.prototype._refreshSize=function(){cov_2cbtmpe5hf.f[4]++;var oldCols=(cov_2cbtmpe5hf.s[39]++,this.columns);var oldRows=(cov_2cbtmpe5hf.s[40]++,this.rows);var winSize=(cov_2cbtmpe5hf.s[41]++,new Array(2));var err=(cov_2cbtmpe5hf.s[42]++,this._handle.getWindowSize(winSize));cov_2cbtmpe5hf.s[43]++;if(err){cov_2cbtmpe5hf.b[7][0]++;cov_2cbtmpe5hf.s[44]++;this.emit('error',errnoException(err,'getWindowSize'));cov_2cbtmpe5hf.s[45]++;return;}else{cov_2cbtmpe5hf.b[7][1]++;}var newCols=(cov_2cbtmpe5hf.s[46]++,winSize[0]);var newRows=(cov_2cbtmpe5hf.s[47]++,winSize[1]);cov_2cbtmpe5hf.s[48]++;if((cov_2cbtmpe5hf.b[9][0]++,oldCols!==newCols)||(cov_2cbtmpe5hf.b[9][1]++,oldRows!==newRows)){cov_2cbtmpe5hf.b[8][0]++;cov_2cbtmpe5hf.s[49]++;this.columns=newCols;cov_2cbtmpe5hf.s[50]++;this.rows=newRows;cov_2cbtmpe5hf.s[51]++;this.emit('resize');}else{cov_2cbtmpe5hf.b[8][1]++;}};// backwards-compat
cov_2cbtmpe5hf.s[52]++;WriteStream.prototype.cursorTo=function(x,y){cov_2cbtmpe5hf.f[5]++;cov_2cbtmpe5hf.s[53]++;readline.cursorTo(this,x,y);};cov_2cbtmpe5hf.s[54]++;WriteStream.prototype.moveCursor=function(dx,dy){cov_2cbtmpe5hf.f[6]++;cov_2cbtmpe5hf.s[55]++;readline.moveCursor(this,dx,dy);};cov_2cbtmpe5hf.s[56]++;WriteStream.prototype.clearLine=function(dir){cov_2cbtmpe5hf.f[7]++;cov_2cbtmpe5hf.s[57]++;readline.clearLine(this,dir);};cov_2cbtmpe5hf.s[58]++;WriteStream.prototype.clearScreenDown=function(){cov_2cbtmpe5hf.f[8]++;cov_2cbtmpe5hf.s[59]++;readline.clearScreenDown(this);};cov_2cbtmpe5hf.s[60]++;WriteStream.prototype.getWindowSize=function(){cov_2cbtmpe5hf.f[9]++;cov_2cbtmpe5hf.s[61]++;return[this.columns,this.rows];};